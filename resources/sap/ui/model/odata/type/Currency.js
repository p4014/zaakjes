/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/merge","sap/ui/model/type/Currency"],function(m,B){"use strict";var c=new Map();var C=B.extend("sap.ui.model.odata.type.Currency",{constructor:function(f,o,d){if(f&&f["customCurrencies"]){throw new Error("Format option customCurrencies is not supported");}if(o){throw new Error("Constraints not supported");}if(arguments.length>2){throw new Error("Only the parameter oFormatOptions is supported");}f=m({parseAsString:true},f);B.call(this,f,o);this.setConstraints=function(){throw new Error("Constraints not supported");};this.setFormatOptions=function(){throw new Error("Format options are immutable");};this.mCustomCurrencies=undefined;}});C.prototype.formatValue=function(v,t){var a=this;function i(V){return V===undefined||V===null;}if(!v||i(v[0])||i(v[1])||v[2]===undefined&&this.mCustomCurrencies===undefined){return null;}if(this.mCustomCurrencies===undefined){if(v[2]===null){this.mCustomCurrencies=null;}else{this.mCustomCurrencies=c.get(v[2]);if(!this.mCustomCurrencies){this.mCustomCurrencies={};Object.keys(v[2]).forEach(function(k){a.mCustomCurrencies[k]={decimals:v[2][k].UnitSpecificScale,isoCode:v[2][k].StandardCode};});c.set(v[2],this.mCustomCurrencies);}B.prototype.setFormatOptions.call(this,m({customCurrencies:this.mCustomCurrencies},this.oFormatOptions));}}return B.prototype.formatValue.call(this,v.slice(0,2),t);};C.prototype.getInterface=function(){return this;};C.prototype.getName=function(){return"sap.ui.model.odata.type.Currency";};C.prototype.parseValue=function(v,s){if(!this.mCustomCurrencies){throw new Error("Cannot parse value without currency customizing");}return B.prototype.parseValue.apply(this,arguments);};C.prototype.validateValue=function(v){if(this.mCustomCurrencies===undefined){throw new Error("Cannot validate value without currency customizing");}};return C;});

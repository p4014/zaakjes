/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/merge","sap/ui/core/format/NumberFormat","sap/ui/model/type/Unit"],function(m,N,B){"use strict";var c=new Map();var U=B.extend("sap.ui.model.odata.type.Unit",{constructor:function(f,C,d){if(f&&f["customUnits"]){throw new Error("Format option customUnits is not supported");}if(C){throw new Error("Constraints not supported");}if(arguments.length>2){throw new Error("Only the parameter oFormatOptions is supported");}f=m({parseAsString:true,unitOptional:true},f);B.call(this,f,C,["customUnits"]);this.setConstraints=function(){throw new Error("Constraints not supported");};this.setFormatOptions=function(){throw new Error("Format options are immutable");};this.mCustomUnits=undefined;}});U.prototype.formatValue=function(v,t){var a=this;function i(V){return V===undefined||V===null;}if(!v||i(v[0])||i(v[1])||v[2]===undefined&&this.mCustomUnits===undefined){return null;}if(this.mCustomUnits===undefined){if(v[2]===null){this.mCustomUnits=null;}else{this.mCustomUnits=c.get(v[2]);if(!this.mCustomUnits){this.mCustomUnits={};Object.keys(v[2]).forEach(function(k){a.mCustomUnits[k]={decimals:v[2][k].UnitSpecificScale,displayName:v[2][k].Text,"unitPattern-count-other":N.getDefaultUnitPattern(k)};});c.set(v[2],this.mCustomUnits);}}}v=v.slice(0,2);if(this.mCustomUnits){v[2]=this.mCustomUnits;}return B.prototype.formatValue.call(this,v,t);};U.prototype.getInterface=function(){return this;};U.prototype.getName=function(){return"sap.ui.model.odata.type.Unit";};U.prototype.parseValue=function(v,s){if(!this.mCustomUnits){throw new Error("Cannot parse value without unit customizing");}return B.prototype.parseValue.apply(this,arguments);};U.prototype.validateValue=function(v){if(this.mCustomUnits===undefined){throw new Error("Cannot validate value without unit customizing");}};return U;});

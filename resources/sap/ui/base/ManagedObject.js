/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./BindingParser','./DataType','./EventProvider','./ManagedObjectMetadata','./Object','../model/BindingMode','../model/StaticBinding','../model/CompositeBinding','../model/Context','../model/FormatException','../model/ParseException','../model/Type','../model/ValidateException',"sap/ui/util/ActivityDetection","sap/base/util/ObjectPath","sap/base/Log","sap/base/assert","sap/base/util/deepClone","sap/base/util/deepEqual","sap/base/util/uid","sap/ui/thirdparty/jquery"],function(B,D,E,M,d,e,S,C,f,F,P,T,V,A,O,L,g,h,j,u,q){"use strict";var I;var k=E.extend("sap.ui.base.ManagedObject",{metadata:{"abstract":true,publicMethods:["getId","getMetadata","getModel","setModel","hasModel","bindProperty","unbindProperty","bindAggregation","unbindAggregation","bindObject","unbindObject","getObjectBinding"],library:"sap.ui.core",properties:{},aggregations:{},associations:{},events:{"validationSuccess":{enableEventBubbling:true,parameters:{element:{type:'sap.ui.base.ManagedObject'},property:{type:'string'},type:{type:'sap.ui.model.Type'},newValue:{type:'any'},oldValue:{type:'any'}}},"validationError":{enableEventBubbling:true,parameters:{element:{type:'sap.ui.base.ManagedObject'},property:{type:'string'},type:{type:'sap.ui.model.Type'},newValue:{type:'any'},oldValue:{type:'any'},message:{type:'string'}}},"parseError":{enableEventBubbling:true,parameters:{element:{type:'sap.ui.base.ManagedObject'},property:{type:'string'},type:{type:'sap.ui.model.Type'},newValue:{type:'any'},oldValue:{type:'any'},message:{type:'string'}}},"formatError":{enableEventBubbling:true,parameters:{element:{type:'sap.ui.base.ManagedObject'},property:{type:'string'},type:{type:'sap.ui.model.Type'},newValue:{type:'any'},oldValue:{type:'any'}}},"modelContextChange":{}},specialSettings:{id:'sap.ui.core.ID',models:'object',bindingContexts:'object',objectBindings:'object',metadataContexts:'object',Type:{type:'string',visibility:'hidden'}}},constructor:function(i,a,b){var t=this;E.call(this);if(typeof i!=='string'&&i!==undefined){b=a;a=i;i=a&&a.id;}if(!i){i=this.getMetadata().uid();}else{var c=k._fnIdPreprocessor;i=(c?c.call(this,i):i);var l=I||(I=D.getType("sap.ui.core.ID"));if(!l.isValid(i)){throw new Error("\""+i+"\" is not a valid ID.");}}this.sId=i;this.mProperties=this.getMetadata().createPropertyBag();this.mAggregations={};this.mAssociations={};this.oParent=null;this.aDelegates=[];this.aBeforeDelegates=[];this.iSuppressInvalidate=0;this.oPropagatedProperties=k._oEmptyPropagatedProperties;this.mSkipPropagation={};this.oModels={};this.aPropagationListeners=[];this.oBindingContexts={};this.mElementBindingContexts={};this.mBindingInfos={};this.mObjectBindingInfos={};this._oContextualSettings=k._defaultContextualSettings;this._sOwnerId=k._sOwnerId;(function(){var n=false;if(t.register){t.register();}try{if(t._initCompositeSupport){t._initCompositeSupport(a);}if(t.init){t.init();}t.applySettings(a,b);n=true;}finally{if(!n&&t.deregister){t.deregister();}}}());}},M);k.create=function(v,K,a){if(!v||v instanceof k||typeof v!=="object"||v instanceof String){return v;}function b(t){if(typeof t==="function"){return t;}if(typeof t==="string"){return O.get(t);}}var c=b(v.Type)||b(K&&K.type);if(typeof c==="function"){return new c(v,a);}var i="Don't know how to create a ManagedObject from "+v+" ("+(typeof v)+")";L.fatal(i);throw new Error(i);};var m;function o(i){if(!m){m=sap.ui.require("sap/ui/core/StashedControlSupport");}if(m){return m.getStashedControls(i);}return[];}k._fnIdPreprocessor=null;k._fnSettingsPreprocessor=null;k.runWithPreprocessors=function(a,b,t){g(typeof a==="function","fn must be a function");g(!b||typeof b==="object","oPreprocessors must be an object");var c={id:this._fnIdPreprocessor,settings:this._fnSettingsPreprocessor};b=b||{};this._fnIdPreprocessor=b.id;this._fnSettingsPreprocessor=b.settings;try{return a.call(t);}finally{this._fnIdPreprocessor=c.id;this._fnSettingsPreprocessor=c.settings;}};k.prototype.applySettings=function(a,b){if(!a||q.isEmptyObject(a)){return this;}var t=this,c=this.getMetadata(),v=c.getJSONKeys(),n=k.create,w=k._fnSettingsPreprocessor,K,x,y;function z(N){for(var i=0,Q=N.length;i<Q;i++){var R=N[i];if(Array.isArray(R)){z(R);}else{t[y._sMutator](n(R,y,b));}}}w&&w.call(this,a);if(a.metadataContexts&&this._processMetadataContexts){this._processMetadataContexts(a.metadataContexts,a);}if(a.models){if(typeof a.models!=="object"){throw new Error("models must be a simple object");}if(d.isA(a.models,"sap.ui.model.Model")){this.setModel(a.models);}else{for(K in a.models){this.setModel(a.models[K],K==="undefined"?undefined:K);}}}if(a.bindingContexts){if(typeof a.bindingContexts!=="object"){throw new Error("bindingContexts must be a simple object");}if(a.bindingContexts instanceof f){this.setBindingContext(a.bindingContexts);}else{for(K in a.bindingContexts){this.setBindingContext(a.bindingContexts[K],K==="undefined"?undefined:K);}}}if(a.objectBindings){if(typeof a.objectBindings!=="string"&&typeof a.objectBindings!=="object"){throw new Error("binding must be a string or simple object");}if(typeof a.objectBindings==="string"||a.objectBindings.path){this.bindObject(a.objectBindings);}else{for(var K in a.objectBindings){a.objectBindings.model=K;this.bindObject(a.objectBindings[K]);}}}for(K in a){x=a[K];if((y=v[K])!==undefined){var G,H,J;switch(y._iKind){case 0:H=D.getType(y.type);J=H&&H.getPrimitiveType().getName();G=this.extractBindingInfo(x,b,J!=="object"&&J!=="any");if(G&&typeof G==="object"){this.bindProperty(K,G);}else{this[y._sMutator](G||x);}break;case 1:G=y.altTypes&&this.extractBindingInfo(x,b);if(G&&typeof G==="object"){this.bindProperty(K,G);}else{if(Array.isArray(x)){if(x.length>1){L.error("Tried to add an array of controls to a single aggregation");}x=x[0];}this[y._sMutator](n(G||x,y,b));}break;case 2:G=this.extractBindingInfo(x,b);if(G&&typeof G==="object"){this.bindAggregation(K,G);}else{x=G||x;if(x){if(Array.isArray(x)){z(x);}else{t[y._sMutator](n(x,y,b));}}}break;case 3:this[y._sMutator](x);break;case 4:if(x){if(Array.isArray(x)){for(var i=0,l=x.length;i<l;i++){this[y._sMutator](x[i]);}}else{this[y._sMutator](x);}}break;case 5:if(typeof x=="function"){this[y._sMutator](x);}else{this[y._sMutator](x[0],x[1],x[2]);}break;case-1:default:break;}}else{g(false,"ManagedObject.apply: encountered unknown setting '"+K+"' for class '"+c.getName()+"' (value:'"+x+"')");}}return this;};k.escapeSettingsValue=function(v){return(typeof v==="string")?k.bindingParser.escape(v):v;};k.prototype.toString=function(){return"ManagedObject "+this.getMetadata().getName()+"#"+this.getId();};k.prototype.getId=function(){return this.sId;};k.prototype.setProperty=function(a,v,b){var c=this.mProperties[a];v=this.validateProperty(a,v);if(j(c,v)){this.mProperties[a]=v;return this;}if(b){A.refresh();}this.mProperties[a]=v;if(!b){this.invalidate();}this.updateModelProperty(a,v,c);if(this.mEventRegistry["_change"]){E.prototype.fireEvent.call(this,"_change",{"id":this.getId(),"name":a,"oldValue":c,"newValue":v});}if(this._observer){this._observer.propertyChange(this,a,c,v);}return this;};k.prototype.getProperty=function(a){var v=this.mProperties[a],b=this.getMetadata().getManagedProperty(a),t;if(!b){throw new Error("Property \""+a+"\" does not exist in "+this);}t=D.getType(b.type);if(t instanceof D&&t.isArrayType()&&Array.isArray(v)){v=v.slice(0);}if(v instanceof String){v=v.valueOf();}if(b.byValue){v=h(v);}return v;};k.prototype.validateProperty=function(a,v){var b=this.getMetadata().getManagedProperty(a),t;if(!b){throw new Error("Property \""+a+"\" does not exist in "+this);}t=D.getType(b.type);if(t instanceof D&&t.isArrayType()&&Array.isArray(v)){v=v.slice(0);}if(v==null){v=b.getDefaultValue();}else if(t instanceof D){if(t.getName()=="string"){if(!(typeof v=="string"||v instanceof String)){v=""+v;}}else if(t.getName()=="string[]"){if(typeof v=="string"){v=[v];}if(!Array.isArray(v)){throw new Error("\""+v+"\" is of type "+typeof v+", expected string[]"+" for property \""+a+"\" of "+this);}for(var i=0;i<v.length;i++){if(typeof v[i]!=="string"){v[i]=""+v[i];}}}else if(!t.isValid(v)){throw new Error("\""+v+"\" is of type "+typeof v+", expected "+t.getName()+" for property \""+a+"\" of "+this);}}if(b.byValue){v=h(v);}if(t&&t.normalize&&typeof t.normalize==="function"){v=t.normalize(v);}return v;};k.prototype.isPropertyInitial=function(a){return!Object.prototype.hasOwnProperty.call(this.mProperties,a)&&!this.isBound(a);};k.prototype.resetProperty=function(a){if(this.mProperties.hasOwnProperty(a)){var b=this.getMetadata().getManagedProperty(a);b.set(this,null);if(this.mProperties[a]===b.getDefaultValue()){delete this.mProperties[a];}}return this;};k.prototype.getOriginInfo=function(a){var v=this.mProperties[a];if(!(v instanceof String&&v.originInfo)){return null;}return v.originInfo;};k.prototype.setAssociation=function(a,i,b){if(i instanceof k){i=i.getId();}else if(i!=null&&typeof i!=="string"){g(false,"setAssociation(): sId must be a string, an instance of sap.ui.base.ManagedObject or null");return this;}if(this.mAssociations[a]===i){return this;}if(b){this.iSuppressInvalidate++;}if(this._observer&&this.mAssociations[a]!=null){this._observer.associationChange(this,a,"remove",this.mAssociations[a]);}this.mAssociations[a]=i;if(this._observer&&this.mAssociations[a]!=null){this._observer.associationChange(this,a,"insert",i);}if(!this.isInvalidateSuppressed()){this.invalidate();}if(b){this.iSuppressInvalidate--;}return this;};k.prototype.getAssociation=function(a,b){var c=this.mAssociations[a];if(!c){c=this.mAssociations[a]=b||null;}else{if(typeof c.length==='number'&&!(c.propertyIsEnumerable('length'))){return c.slice();}return c;}return c;};k.prototype.addAssociation=function(a,i,b){if(i instanceof k){i=i.getId();}else if(typeof i!=="string"){g(false,"addAssociation(): sId must be a string or an instance of sap.ui.base.ManagedObject");return this;}if(b){this.iSuppressInvalidate++;}var c=this.mAssociations[a];if(!c){c=this.mAssociations[a]=[i];}else{c.push(i);}if(this._observer){this._observer.associationChange(this,a,"insert",i);}if(!this.isInvalidateSuppressed()){this.invalidate();}if(b){this.iSuppressInvalidate--;}return this;};k.prototype.removeAssociation=function(a,v,b){var c=this.mAssociations[a];var l=null;if(!c){return null;}if(b){this.iSuppressInvalidate++;}if(typeof(v)=="object"&&v.getId){v=v.getId();}if(typeof(v)=="string"){for(var i=0;i<c.length;i++){if(c[i]==v){v=i;break;}}}if(typeof(v)=="number"){if(v<0||v>=c.length){L.warning("ManagedObject.removeAssociation called with invalid index: "+a+", "+v);}else{l=c[v];c.splice(v,1);if(this._observer){this._observer.associationChange(this,a,"remove",l);}if(!this.isInvalidateSuppressed()){this.invalidate();}}}if(b){this.iSuppressInvalidate--;}return l;};k.prototype.removeAllAssociation=function(a,b){var i=this.mAssociations[a];if(!i){return[];}delete this.mAssociations[a];if(!i.length){return i;}if(b){this.iSuppressInvalidate++;}if(this._observer){this._observer.associationChange(this,a,"remove",i);}if(!this.isInvalidateSuppressed()){this.invalidate();}if(b){this.iSuppressInvalidate--;}return i;};k.prototype.validateAggregation=function(a,b,c,l){var n=this.getMetadata(),t=n.getManagedAggregation(a),v,w,i,x;if(!t){throw new Error("Aggregation \""+a+"\" does not exist in "+this);}if(t.multiple!==c){throw new Error("Aggregation '"+a+"' of "+this+" used with wrong cardinality (declared as "+(t.multiple?"0..n":"0..1")+")");}var y=n.getAggregationForwarder(a);if(y&&!l){y.getTarget(this).validateAggregation(y.targetAggregationName,b,c);}if(!t.multiple&&!b){return b;}if(b instanceof d&&b.isA(t.type)){return b;}v=t.altTypes;if(v&&v.length){if(b==null){return b;}for(i=0;i<v.length;i++){w=D.getType(v[i]);if(w instanceof D){if(w.isValid(b)){return b;}}}}w=O.get(t.type);if(typeof w==="function"&&b instanceof w){return b;}x="\""+b+"\" is not valid for aggregation \""+a+"\" of "+this;if(D.isInterfaceType(t.type)){g(false,x);return b;}else{throw new Error(x);}};k.prototype.setAggregation=function(a,b,c){var i=this.getMetadata().getAggregationForwarder(a);if(i){b=this.validateAggregation(a,b,false,true);return i.set(this,b);}var l=this.mAggregations[a];if(l===b){return this;}b=this.validateAggregation(a,b,false);if(c){this.iSuppressInvalidate++;}this.mAggregations[a]=null;if(l instanceof k){l.setParent(null);}else{if(this._observer!=null&&l!=null){this._observer.aggregationChange(this,a,"remove",l);}}this.mAggregations[a]=b;if(b instanceof k){b.setParent(this,a,c);}else{if(!this.isInvalidateSuppressed()){this.invalidate();}if(this._observer!=null&&b!=null){this._observer.aggregationChange(this,a,"insert",b);}}if(c){this.iSuppressInvalidate--;}return this;};k.prototype.getAggregation=function(a,b){var c=this.getMetadata().getAggregationForwarder(a);if(c){return c.get(this);}var i=this.mAggregations[a];if(!i){i=this.mAggregations[a]=b||null;}if(i){if(typeof i.length==='number'&&!(i.propertyIsEnumerable('length'))){return i.slice();}return i;}else{return null;}};k.prototype.indexOfAggregation=function(a,b){var c=this.getMetadata().getAggregationForwarder(a);if(c){return c.indexOf(this,b);}var l=this.mAggregations[a];if(l){if(l.length==undefined){return-2;}for(var i=0;i<l.length;i++){if(l[i]==b){return i;}}}return-1;};k.prototype.insertAggregation=function(a,b,c,l){if(!b){return this;}b=this.validateAggregation(a,b,true,true);var n=this.getMetadata().getAggregationForwarder(a);if(n){return n.insert(this,b,c);}var t=this.mAggregations[a]||(this.mAggregations[a]=[]);var i;if(c<0){i=0;}else if(c>t.length){i=t.length;}else{i=c;}if(i!==c){L.warning("ManagedObject.insertAggregation: index '"+c+"' out of range [0,"+t.length+"], forced to "+i);}t.splice(i,0,b);b.setParent(this,a,l);return this;};k.prototype.addAggregation=function(a,b,c){if(!b){return this;}b=this.validateAggregation(a,b,true,true);var i=this.getMetadata().getAggregationForwarder(a);if(i){return i.add(this,b);}var l=this.mAggregations[a];if(!l){l=this.mAggregations[a]=[b];}else{l.push(b);}b.setParent(this,a,c);return this;};k.prototype.removeAggregation=function(a,v,b){var c=this.getMetadata().getAggregationForwarder(a);if(c){return c.remove(this,v);}var l=this.mAggregations[a],n=null,i;if(!l){return null;}if(b){this.iSuppressInvalidate++;}if(typeof(v)=="string"){for(i=0;i<l.length;i++){if(l[i]&&l[i].getId()===v){v=i;break;}}}if(typeof(v)=="object"){for(i=0;i<l.length;i++){if(l[i]==v){v=i;break;}}}if(typeof(v)=="number"){if(v<0||v>=l.length){L.warning("ManagedObject.removeAggregation called with invalid index: "+a+", "+v);}else{n=l[v];l.splice(v,1);n.setParent(null);if(!this.isInvalidateSuppressed()){this.invalidate();}}}if(b){this.iSuppressInvalidate--;}return n;};k.prototype.removeAllAggregation=function(a,b){var c=this.getMetadata().getAggregationForwarder(a);if(c){return c.removeAll(this);}var l=this.mAggregations[a];if(!l){return[];}delete this.mAggregations[a];if(!l.length){return l;}if(b){this.iSuppressInvalidate++;}for(var i=0;i<l.length;i++){l[i].setParent(null);}if(!this.isInvalidateSuppressed()){this.invalidate();}if(b){this.iSuppressInvalidate--;}return l;};k.prototype.destroyAggregation=function(a,b){var l=this.getMetadata().getAggregationForwarder(a);if(l){return l.destroy(this);}var n=this.mAggregations[a],i,t;o(this.getId()).forEach(function(c){if(c.sParentAggregationName===a){c.destroy();}});if(!n){return this;}delete this.mAggregations[a];if(Array.isArray(n)&&!n.length){return this;}if(b){this.iSuppressInvalidate++;}if(n instanceof k){n.destroy(b);if(this._observer){this._observer.aggregationChange(this,a,"remove",n);}}else if(Array.isArray(n)){for(i=n.length-1;i>=0;i--){t=n[i];if(t){t.destroy(b);if(this._observer){this._observer.aggregationChange(this,a,"remove",t);}}}}if(!this.isInvalidateSuppressed()){this.invalidate();}if(b){this.iSuppressInvalidate--;}return this;};k.prototype.invalidate=function(){if(this.oParent){this.oParent.invalidate(this);}};k.prototype.isInvalidateSuppressed=function(){var i=this.iSuppressInvalidate>0;if(this.oParent&&this.oParent instanceof k){i=i||this.oParent.isInvalidateSuppressed();}return i;};k.prototype._removeChild=function(c,a,b){if(!a){L.error("Cannot remove aggregated child without aggregation name.",null,this);}else{if(b){this.iSuppressInvalidate++;}var i=this.indexOfAggregation(a,c);var l=this.getMetadata().getAggregation(a);if(i==-2){if(l&&this[l._sMutator]){this[l._sMutator](null);}else{this.setAggregation(a,null,b);}}else if(i>-1){if(l&&this[l._sRemoveMutator]){this[l._sRemoveMutator](i);}else{this.removeAggregation(a,i,b);}}if(b){this.iSuppressInvalidate--;}}};function p(a,b){while(a&&a!==b){a=a.oParent;}return!!a;}k.prototype.setParent=function(a,b,c){g(a==null||a instanceof k,"oParent either must be null, undefined or a ManagedObject");if(!a){if(this.oParent){if(this.oParent._observer){this.oParent._observer.aggregationChange(this.oParent,this.sParentAggregationName,"remove",this);}if(this.aAPIParentInfos&&this.aAPIParentInfos.forwardingCounter===0){delete this.aAPIParentInfos;}}this.oParent=null;this.sParentAggregationName=null;var i=k._oEmptyPropagatedProperties;if(i!==this.oPropagatedProperties){this.oPropagatedProperties=i;if(!this._bIsBeingDestroyed){Promise.resolve().then(function(){if(!this.oParent){this.updateBindings(true,null);this.updateBindingContext(false,undefined,true);this.propagateProperties(true);this.fireModelContextChange();}}.bind(this));}}this._oContextualSettings=k._defaultContextualSettings;if(!this._bIsBeingDestroyed){setTimeout(function(){if(!this.oParent){this._propagateContextualSettings();}}.bind(this),0);}A.refresh();return;}if(p(a,this)){throw new Error("Cycle detected: new parent '"+a+"' is already a descendant of (or equal to) '"+this+"'");}if(c){A.refresh();this.iSuppressInvalidate++;}var l=this.getParent();if(l){l._removeChild(this,this.sParentAggregationName);}this.oParent=a;this.sParentAggregationName=b;var i=this.aAPIParentInfos?this.aAPIParentInfos[0].parent._getPropertiesToPropagate():a._getPropertiesToPropagate();if(i!==this.oPropagatedProperties){this.oPropagatedProperties=i;if(this.hasModel()){this.updateBindings(true,null);this.updateBindingContext(false,undefined,true);this.propagateProperties(true);}this._callPropagationListener();this.fireModelContextChange();}this._applyContextualSettings(a._oContextualSettings);if(a&&!this.isInvalidateSuppressed()){a.invalidate(this);}if(c){this.iSuppressInvalidate--;}if(a._observer){a._observer.aggregationChange(a,b,"insert",this);}return this;};k.prototype._applyContextualSettings=function(c){if(this._oContextualSettings!==c){this._oContextualSettings=c;this._propagateContextualSettings();this._onContextualSettingsChanged();}};k.prototype._onContextualSettingsChanged=function(){};k.prototype._propagateContextualSettings=function(){var a=this._oContextualSettings,b,c,i;for(b in this.mAggregations){c=this.mAggregations[b];if(c instanceof k){c._applyContextualSettings(a);}else if(c instanceof Array){for(i=0;i<c.length;i++){if(c[i]instanceof k){c[i]._applyContextualSettings(a);}}}}};k.prototype._getContextualSettings=function(){return this._oContextualSettings;};k.prototype.getParent=function(){return this.oParent;};k.prototype.destroy=function(b){if(this.bIsDestroyed){return;}var t=this;this._bIsBeingDestroyed=true;if(b){this.iSuppressInvalidate++;}if(this.exit){this.exit();}if(this._exitCompositeSupport){this._exitCompositeSupport();}for(var a in this.mAggregations){this.destroyAggregation(a,b);}o(this.getId()).forEach(function(c){c.destroy();});if(this.deregister){this.deregister();}if(this.oParent&&this.sParentAggregationName){this.oParent._removeChild(this,this.sParentAggregationName,b);}delete this.oParent;q.each(this.mBindingInfos,function(n,c){if(c.factory){t.unbindAggregation(n,true);}else{t.unbindProperty(n,true);}});q.each(this.mObjectBindingInfos,function(n,c){t.unbindObject(n,true);});if(b){this.iSuppressInvalidate--;}if(this._observer){this._observer.objectDestroyed(this);}if(this.aAPIParentInfos){this.aAPIParentInfos=null;}E.prototype.destroy.apply(this,arguments);this.setParent=function(){throw Error("The object with ID "+t.getId()+" was destroyed and cannot be used anymore.");};this.bIsDestroyed=true;};k.bindingParser=B.simpleParser;k.prototype.isBinding=function(v,K){return typeof this.extractBindingInfo(v)==="object";};k.prototype.extractBindingInfo=function(v,a,b){if(v&&typeof v==="object"){if(v.ui5object){delete v.ui5object;}else if(v.path!=undefined||v.parts||(b&&v.value!=undefined)){if(v.template){v.template=k.create(v.template);}return v;}}if(typeof v==="string"){return k.bindingParser(v,a,true);}};k.prototype.getBindingInfo=function(n){var a=this.getMetadata().getAggregationForwarder(n);if(a&&a.forwardBinding){return a.getTarget(this).getBindingInfo(a.targetAggregationName);}return this.mBindingInfos[n];};k.prototype.bindObject=function(b){var a,c,i;if(typeof b=="string"){c=b;b={path:c,parameters:arguments[1]};}else{c=b.path;}i=c.indexOf(">");if(i>0){b.model=c.substr(0,i);b.path=c.substr(i+1);}a=b.model;if(this.mObjectBindingInfos[a]){this.unbindObject(a,true);}this.mObjectBindingInfos[a]=b;if(this.getModel(a)){this._bindObject(b);}return this;};k.prototype._bindObject=function(b){var a,c,i,l,t=this;var n=function(w){t.setElementBindingContext(a.getBoundContext(),i);};var v=function(w){var x=a.getDataState();if(!x){return;}if(t.refreshDataState){t.refreshDataState('',x);}};i=b.model;l=this.getModel(i);c=this.getBindingContext(i);a=l.bindContext(b.path,c,b.parameters);if(b.suspended){a.suspend(true);}a.attachChange(n);b.binding=a;b.modelChangeHandler=n;b.dataStateChangeHandler=v;a.attachEvents(b.events);if(this.refreshDataState){a.attachAggregatedDataStateChange(v);}a.initialize();};k.prototype.unbindObject=function(a,b){var c=this.mObjectBindingInfos[a];if(c){if(c.binding){c.binding.detachChange(c.modelChangeHandler);c.binding.detachEvents(c.events);if(this.refreshDataState){c.binding.detachAggregatedDataStateChange(c.dataStateChangeHandler);}c.binding.destroy();}delete this.mObjectBindingInfos[a];delete this.mElementBindingContexts[a];if(!b){this.updateBindingContext(false,a);this.propagateProperties(a);this.fireModelContextChange();}}return this;};k.prototype.bindContext=function(a){return this.bindObject(a);};k.prototype.unbindContext=function(a){return this.unbindObject(a);};k.prototype.bindProperty=function(n,b,a,c){var l,t=true,v=this.getMetadata().getPropertyLikeSetting(n);if(!v){throw new Error("Property \""+n+"\" does not exist in "+this);}if(typeof b=="string"){b={parts:[{path:b,type:a instanceof T?a:undefined,mode:c}],formatter:typeof a==='function'?a:undefined};}if(!b.parts){b.parts=[];b.parts[0]={path:b.path,targetType:b.targetType,type:b.type,suspended:b.suspended,formatOptions:b.formatOptions,constraints:b.constraints,model:b.model,mode:b.mode,value:b.value};delete b.path;delete b.targetType;delete b.mode;delete b.model;delete b.value;}for(var i=0;i<b.parts.length;i++){var w=b.parts[i];if(typeof w=="string"){w={path:w};b.parts[i]=w;}if(w.path!==undefined){l=w.path.indexOf(">");if(l>0){w.model=w.path.substr(0,l);w.path=w.path.substr(l+1);}}if(b.formatter&&w.mode!=e.OneWay&&w.mode!=e.OneTime){w.mode=e.OneWay;}if(w.value===undefined&&!this.getModel(w.model)){t=false;}}if(this.isBound(n)){this.unbindProperty(n,true);}this.mBindingInfos[n]=b;if(this._observer){this._observer.bindingChange(this,n,"prepare",b,"property");}if(t){this._bindProperty(n,b);}return this;};k.prototype._bindProperty=function(n,b){var a,c,i,l,t=e.TwoWay,v,w,x=this.getMetadata().getPropertyLikeSetting(n),y=x._iKind===0?x.type:x.altTypes[0],z=this,G=[],H=function(K){z.updateProperty(n);var N=i.getDataState();if(N){var Q=N.getControlMessages();if(Q&&Q.length>0){var R=sap.ui.getCore().getMessageManager();N.setControlMessages([]);if(Q){R.removeMessages(Q);}}N.setInvalidValue(undefined);}if(i.getBindingMode()===e.OneTime&&i.isResolved()){i.detachChange(H);if(this.refreshDataState){i.detachAggregatedDataStateChange(J);}i.detachEvents(b.events);}},J=function(){var K=i.getDataState();if(!K){return;}if(z.refreshDataState){z.refreshDataState(n,K);}};b.parts.forEach(function(K){c=z.getBindingContext(K.model);a=z.getModel(K.model);v=K.type;if(typeof v=="string"){w=O.get(v);if(typeof w!=="function"){throw new Error("Cannot find type \""+v+"\" used in control \""+z.getId()+"\"!");}v=new w(K.formatOptions,K.constraints);}if(K.value!==undefined){i=new S(K.value);}else{i=a.bindProperty(K.path,c,K.parameters||b.parameters);}i.setType(v,K.targetType||y);i.setFormatter(K.formatter);if(K.suspended){i.suspend(true);}l=K.mode||(a&&a.getDefaultBindingMode())||e.TwoWay;i.setBindingMode(l);if(l!==e.TwoWay){t=e.OneWay;}G.push(i);});if(G.length>1||(b.formatter&&b.formatter.textFragments)){v=b.type;if(typeof v=="string"){w=O.get(v);v=new w(b.formatOptions,b.constraints);}i=new C(G,b.useRawValues,b.useInternalValues);i.setType(v,b.targetType||y);i.setBindingMode(b.mode||t);}else{i=G[0];}i.attachChange(H);if(this.refreshDataState){i.attachAggregatedDataStateChange(J);}i.setFormatter(q.proxy(b.formatter,this));b.binding=i;b.modelChangeHandler=H;b.dataStateChangeHandler=J;i.attachEvents(b.events);i.initialize();if(this._observer){this._observer.bindingChange(this,n,"ready",b,"property");}};k.prototype.unbindProperty=function(n,b){var a=this.mBindingInfos[n];if(a){if(a.binding){a.binding.detachChange(a.modelChangeHandler);if(this.refreshDataState){a.binding.detachAggregatedDataStateChange(a.dataStateChangeHandler);}a.binding.detachEvents(a.events);a.binding.destroy();}if(this._observer){this._observer.bindingChange(this,n,"remove",this.mBindingInfos[n],"property");}delete this.mBindingInfos[n];if(!b){this.resetProperty(n);}}return this;};k.prototype.updateProperty=function(n){var b=this.mBindingInfos[n],a=b.binding,c=this.getMetadata().getPropertyLikeSetting(n);if(b.skipPropertyUpdate){return;}try{var v=a.getExternalValue();b.skipModelUpdate=true;c.set(this,v);b.skipModelUpdate=false;}catch(i){b.skipModelUpdate=false;if(i instanceof F){this.fireFormatError({element:this,property:n,type:a.getType(),newValue:a.getValue(),oldValue:this[c._sGetter](),exception:i,message:i.message},false,true);b.skipModelUpdate=true;this.resetProperty(n);b.skipModelUpdate=false;}else{throw i;}}};k.prototype.updateModelProperty=function(n,v,a){if(this.isBound(n)){var b=this.mBindingInfos[n],c=b.binding;if(b.skipModelUpdate||(c&&c.isSuspended())){return;}if(c&&c.getBindingMode()==e.TwoWay){try{b.skipPropertyUpdate=true;c.setExternalValue(v);b.skipPropertyUpdate=false;var i=c.getExternalValue();if(v!=i){this.updateProperty(n);}if(c.hasValidation()){this.fireValidationSuccess({element:this,property:n,type:c.getType(),newValue:v,oldValue:a},false,true);}}catch(l){b.skipPropertyUpdate=false;var t={element:this,property:n,type:c.getType(),newValue:v,oldValue:a,exception:l,message:l.message};if(l instanceof P){this.fireParseError(t,false,true);}else if(l instanceof V){this.fireValidationError(t,false,true);}else{throw l;}}}}};var r=1;k.prototype.bindAggregation=function(n,b){var a,t,c,i,l=this.getMetadata(),v=l.getAggregation(n);if(!v){throw new Error("Aggregation \""+n+"\" does not exist in "+this);}if(!v.multiple){L.error("Binding of single aggregation \""+n+"\" of "+this+" is not supported!");}if(typeof b=="string"){a=arguments[1];t=arguments[2];c=arguments[3];i=arguments[4];b={path:a,sorter:c,filters:i};if(t instanceof k){b.template=t;}else if(typeof t==="function"){b.factory=t;}}var w=l.getAggregationForwarder(n);if(w&&w.forwardBinding){w.getTarget(this).bindAggregation(w.targetAggregationName,b);return this;}if(this.isBound(n)){this.unbindAggregation(n);}if(!(b.template||b.factory)){if(v._doesNotRequireFactory){b.factory=function(){throw new Error("dummy factory called unexpectedly ");};}else{throw new Error("Missing template or factory function for aggregation "+n+" of "+this+" !");}}if(b.template){if(b.template._sapui_candidateForDestroy){L.warning("A binding template that is marked as 'candidate for destroy' is reused in a binding. "+"You can use 'templateShareable:true' to fix this issue for all bindings that are affected "+"(The template is used in aggregation '"+n+"' of object '"+this.getId()+"'). "+"For more information, see documentation under 'Aggregation Binding'.");delete b.template._sapui_candidateForDestroy;}if(b.templateShareable===undefined){b.templateShareable=r;}b.factory=function(y){return b.template.clone(y);};}var x=b.path.indexOf(">");if(x>0){b.model=b.path.substr(0,x);b.path=b.path.substr(x+1);}this.mBindingInfos[n]=b;if(this._observer){this._observer.bindingChange(this,n,"prepare",b,"aggregation");}if(this.getModel(b.model)){this._bindAggregation(n,b);}return this;};k.prototype._bindAggregation=function(n,b){var t=this,a,c=function(w){var U="update"+n.substr(0,1).toUpperCase()+n.substr(1);if(t[U]){var x=w&&w.getParameter("reason");if(x){t[U](x);}else{t[U]();}}else{t.updateAggregation(n);}},i=function(w){var R="refresh"+n.substr(0,1).toUpperCase()+n.substr(1);if(t[R]){t[R](w.getParameter("reason"));}else{c(w);}},l=function(w){var x=a.getDataState();if(!x){return;}if(t.refreshDataState){t.refreshDataState(n,x);}};var v=this.getModel(b.model);if(this.isTreeBinding(n)){a=v.bindTree(b.path,this.getBindingContext(b.model),b.filters,b.parameters,b.sorter);}else{a=v.bindList(b.path,this.getBindingContext(b.model),b.sorter,b.filters,b.parameters);if(this.bUseExtendedChangeDetection){a.enableExtendedChangeDetection(!b.template,b.key);}}if(b.suspended){a.suspend(true);}b.binding=a;b.modelChangeHandler=c;b.modelRefreshHandler=i;b.dataStateChangeHandler=l;a.attachChange(c);a.attachRefresh(i);a.attachEvents(b.events);if(this.refreshDataState){a.attachAggregatedDataStateChange(l);}a.initialize();if(this._observer){this._observer.bindingChange(this,n,"ready",b,"aggregation");}};k.prototype.unbindAggregation=function(n,b){var a=this.getMetadata().getAggregationForwarder(n);if(a&&a.forwardBinding){a.getTarget(this).unbindAggregation(a.targetAggregationName,b);return this;}var c=this.mBindingInfos[n],i=this.getMetadata().getAggregation(n);if(c){if(c.binding){c.binding.detachChange(c.modelChangeHandler);c.binding.detachRefresh(c.modelRefreshHandler);c.binding.detachEvents(c.events);if(this.refreshDataState){c.binding.detachAggregatedDataStateChange(c.dataStateChangeHandler);}c.binding.destroy();}if(c.template){if(!c.templateShareable&&c.template.destroy){c.template.destroy();}if(c.templateShareable===r){c.template._sapui_candidateForDestroy=true;}}if(this._observer){this._observer.bindingChange(this,n,"remove",this.mBindingInfos[n],"aggregation");}delete this.mBindingInfos[n];if(!b){this[i._sDestructor]();}}return this;};k.prototype.updateAggregation=function(n){var b=this.mBindingInfos[n],a=b.binding,c=b.factory,l=this.getMetadata().getAggregation(n),G,t,v,w=l._sMutator+"Group",x=this;function y(i,N){if(x.bUseExtendedChangeDetection){return M.uid('clone');}else{return i.getId()+"-"+N;}}function z(N,v,Q,R){var U=N[l._sGetter]()||[],W,X;if(U.length>v.length){for(var i=v.length;i<U.length;i++){X=U[i];N[l._sRemoveMutator](X);X.destroy("KeepDom");}}for(var i=0;i<v.length;i++){W=v[i];X=U[i];if(Q){Q(W);}if(X){X.setBindingContext(W,b.model);}else{X=c(y(N,i),W);X.setBindingContext(W,b.model);N[l._sMutator](X);}if(R){R(W,X);}}}function H(N,v){var Q=v.diff,R=N[l._sGetter]()||[],U,W,X,i;if(!Q||R.length===0){z(N,v);return;}for(i=0;i<Q.length;i++){U=Q[i];switch(U.type){case"insert":X=v[U.index];W=c(y(N,U.index),X);W.setBindingContext(X,b.model);N[l._sInsertMutator](W,U.index);break;case"delete":W=N[l._sRemoveMutator](U.index);W.destroy("KeepDom");break;default:L.error("Unknown diff type \""+U.type+"\"");}}R=N[l._sGetter]()||[];for(i=0;i<R.length;i++){R[i].setBindingContext(v[i]);}}function J(i){var N=a.getGroup(i);if(N.key!==G){var Q;if(b.groupHeaderFactory){Q=b.groupHeaderFactory(N);}x[w](N,Q);G=N.key;}}function K(i,N){z(i,N,null,function(Q,R){K(R,a.getNodeContexts(Q));});}if(d.isA(a,"sap.ui.model.ListBinding")){v=a.getContexts(b.startIndex,b.length);t=a.isGrouped()&&x[w];if(t||a.bWasGrouped){this[l._sDestructor]();z(this,v,t?J:undefined);}else if(this.bUseExtendedChangeDetection){H(this,v);}else{if(!b.template){this[l._sDestructor]();}z(this,v);}a.bWasGrouped=t;}else if(d.isA(a,"sap.ui.model.TreeBinding")){if(!b.template){this[l._sDestructor]();}K(this,a.getRootContexts());}};k.prototype.refreshAggregation=function(n){var b=this.mBindingInfos[n],a=b.binding;a.getContexts(b.startIndex,b.length);};k.prototype.propagateMessages=function(n,a){L.warning("Message for "+this+", Property "+n);};k.prototype.isTreeBinding=function(n){return false;};k.prototype.updateBindings=function(U,a){var t=this,n,b;function c(b){var x=b.parts,i;if(x){if(x.length==1){return(U||x[0].model==a)&&!b.binding.updateRequired(t.getModel(x[0].model));}else{for(i=0;i<x.length;i++){if((U||x[i].model==a)&&!b.binding.aBindings[i].updateRequired(t.getModel(x[i].model))){return true;}}}}else{return(U||b.model==a)&&!b.binding.updateRequired(t.getModel(b.model));}}function l(b){var x=b.parts,i;if(x){for(i=0;i<x.length;i++){if(!t.getModel(x[i].model)){return false;}}return true;}else{return!!t.getModel(b.model);}}function v(b){if(t.refreshDataState){t.refreshDataState(n,b.binding.getDataState());}b.binding.detachChange(b.modelChangeHandler);if(b.modelRefreshHandler){b.binding.detachRefresh(b.modelRefreshHandler);}b.binding.detachEvents(b.events);b.binding.destroy();delete b.binding;delete b.modelChangeHandler;delete b.dataStateChangeHandler;delete b.modelRefreshHandler;}for(n in this.mObjectBindingInfos){b=this.mObjectBindingInfos[n];if(b.binding&&c(b)){v(b);}if(!b.binding&&l(b)){this._bindObject(b);}}for(n in this.mBindingInfos){b=this.mBindingInfos[n];if(b.binding&&c(b)){if(this._observer){var w=b.factory?"aggregation":"property";this._observer.bindingChange(this,n,"remove",b,w);}v(b);}if(!b.binding&&l(b)){if(b.factory){this._bindAggregation(n,b);}else{this._bindProperty(n,b);}}}};k.prototype.isBound=function(n){return!!this.getBindingInfo(n);};k.prototype.getObjectBinding=function(a){return this.mObjectBindingInfos[a]&&this.mObjectBindingInfos[a].binding;};k.prototype.getEventingParent=function(){return this.oParent;};k.prototype.getBinding=function(n){var i=this.getBindingInfo(n);return i&&i.binding;};k.prototype.getBindingPath=function(n){var i=this.getBindingInfo(n);return i&&(i.path||(i.parts&&i.parts[0]&&i.parts[0].path));};k.prototype.setBindingContext=function(c,a){g(a===undefined||(typeof a==="string"&&!/^(undefined|null)?$/.test(a)),"sModelName must be a string or omitted");var b=this.oBindingContexts[a];if(f.hasChanged(b,c)){if(c===undefined){delete this.oBindingContexts[a];}else{this.oBindingContexts[a]=c;}this.updateBindingContext(false,a);this.propagateProperties(a);this.fireModelContextChange();}return this;};k.prototype.setElementBindingContext=function(c,a){g(a===undefined||(typeof a==="string"&&!/^(undefined|null)?$/.test(a)),"sModelName must be a string or omitted");var b=this.mElementBindingContexts[a];if(f.hasChanged(b,c)){if(c===undefined){delete this.mElementBindingContexts[a];}else{this.mElementBindingContexts[a]=c;}this.updateBindingContext(true,a);this.propagateProperties(a);this.fireModelContextChange();}return this;};k.prototype.updateBindingContext=function(b,a,U){var c,l={},n,t,N,v,i;if(U){for(n in this.oModels){if(this.oModels.hasOwnProperty(n)){l[n]=n;}}for(n in this.oPropagatedProperties.oModels){if(this.oPropagatedProperties.oModels.hasOwnProperty(n)){l[n]=n;}}}else{l[a]=a;}for(n in l){if(l.hasOwnProperty(n)){n=n==="undefined"?undefined:n;c=this.getModel(n);v=this.mObjectBindingInfos[n];if(c&&v&&!b){if(!v.binding){this._bindObject(v);}else{t=this._getBindingContext(n);if(f.hasChanged(v.binding.getContext(),t)){v.binding.setContext(t);}}continue;}t=this.getBindingContext(n);for(N in this.mBindingInfos){var v=this.mBindingInfos[N],w=v.binding,x=v.parts;if(!w){continue;}if(x&&x.length>1){for(i=0;i<x.length;i++){if(x[i].model==n){w.aBindings[i].setContext(t);}}}else if(v.factory){if(v.model==n){w.setContext(t);}}else{if(x[0].model==n){w.setContext(t);}}}}}};k.prototype.getBindingContext=function(a){var b=this.getModel(a),c=this.mElementBindingContexts[a];if(c&&!b){return c;}else if(c&&b&&c.getModel()===b){return c;}else if(c===null){return c;}else{return this._getBindingContext(a);}};k.prototype._getBindingContext=function(a){var b=this.getModel(a),c=this.oBindingContexts[a],i=this.oPropagatedProperties.oBindingContexts[a];if(c&&!b){return this.oBindingContexts[a];}else if(c&&b&&c.getModel()===b){return this.oBindingContexts[a];}else if(c===null){return c;}else if(i&&b&&i.getModel()!==b){return undefined;}else{return i;}};k.prototype.setModel=function(a,n){g(a==null||d.isA(a,"sap.ui.model.Model"),"oModel must be an instance of sap.ui.model.Model, null or undefined");g(n===undefined||(typeof n==="string"&&!/^(undefined|null)?$/.test(n)),"sName must be a string or omitted");if(!a&&this.oModels[n]){delete this.oModels[n];this.propagateProperties(n);this.updateBindings(false,n);this.fireModelContextChange();}else if(a&&a!==this.oModels[n]){this.oModels[n]=a;this.propagateProperties(n);this.updateBindingContext(false,n);this.updateBindings(false,n);this.fireModelContextChange();}return this;};k.prototype.addPropagationListener=function(l){g(typeof l==='function',"listener must be a function");this.aPropagationListeners.push(l);this.propagateProperties(false);this._callPropagationListener(l);return this;};k.prototype.removePropagationListener=function(l){g(typeof l==='function',"listener must be a function");var a=this.aPropagationListeners;var i=a.indexOf(l);if(i>=0){a.splice(i,1);this.propagateProperties(false);}return this;};k.prototype.getPropagationListeners=function(){return this.oPropagatedProperties.aPropagationListeners.concat(this.aPropagationListeners);};k.prototype._callPropagationListener=function(l){var a;if(l){l(this);}else{a=this.getPropagationListeners();for(var i=0;i<a.length;i++){l=a[i];l(this);}}return this;};k._oEmptyPropagatedProperties={oModels:{},oBindingContexts:{},aPropagationListeners:[]};var s=Object.assign||q.extend;function _(a,c){return!c.aAPIParentInfos||c.aAPIParentInfos[0].parent===a;}k.prototype.propagateProperties=function(n){var a=this._getPropertiesToPropagate(),U=n===true,b=n===false,N=U?undefined:n,c,l,i,t=s({},this.mAggregations,this.mForwardedAggregations);for(c in t){if(this.mSkipPropagation[c]){continue;}l=t[c];if(l instanceof k){if(_(this,l)){this._propagateProperties(n,l,a,U,N,b);}}else if(l instanceof Array){for(i=0;i<l.length;i++){if(l[i]instanceof k){if(_(this,l[i])){this._propagateProperties(n,l[i],a,U,N,b);}}}}}};k.prototype._propagateProperties=function(n,a,b,U,N,c){if(!b){b=this._getPropertiesToPropagate();U=n===true;c=n===false;N=U?undefined:n;}if(a.oPropagatedProperties!==b){a.oPropagatedProperties=b;if(c!==true){a.updateBindings(U,N);a.updateBindingContext(false,N,U);}a.propagateProperties(n);if(c||U){a._callPropagationListener();}a.fireModelContextChange();}};k.prototype._getPropertiesToPropagate=function(){var n=q.isEmptyObject(this.oModels),N=q.isEmptyObject(this.oBindingContexts),b=this.aPropagationListeners.length===0,a=q.isEmptyObject(this.mElementBindingContexts);function c(l,t,v,w){return l?t:q.extend({},t,v,w);}function i(l,t,v){return l?t:t.concat(v);}if(N&&n&&a&&b){return this.oPropagatedProperties;}else{return{oModels:c(n,this.oPropagatedProperties.oModels,this.oModels),oBindingContexts:c((N&&a),this.oPropagatedProperties.oBindingContexts,this.oBindingContexts,this.mElementBindingContexts),aPropagationListeners:i(b,this.oPropagatedProperties.aPropagationListeners,this.aPropagationListeners)};}};k.prototype.getModel=function(a){g(a===undefined||(typeof a==="string"&&!/^(undefined|null)?$/.test(a)),"sModelName must be a string or omitted");return this.oModels[a]||this.oPropagatedProperties.oModels[a];};k.prototype.hasModel=function(){return!(q.isEmptyObject(this.oModels)&&q.isEmptyObject(this.oPropagatedProperties.oModels));};k.prototype.clone=function(a,b,c){var n=true,t=true;if(c){n=!!c.cloneChildren;t=!!c.cloneBindings;}if(!a){a=M.uid("clone")||u();}if(!b&&n){b=this.findAggregatedObjects(true).map(function(b1){return b1.getId();});}var v=this.getMetadata(),w=v._oClass,x=this.getId()+"-"+a,y={},z,G=this.mProperties,K,N,H,J=k.bindingParser.escape,i,Q;var R=Object.keys(G);i=R.length;while(i>0){K=R[--i];z=v.getProperty(K);if(z&&!(this.isBound(K)&&t)){if(typeof G[K]==="string"){y[K]=J(G[K]);}else{y[K]=z.byValue?h(G[K]):G[K];}}}y["models"]=this.oModels;y["bindingContexts"]=this.oBindingContexts;if(n){var U=s({},this.mAggregations,this.mForwardedAggregations);for(N in U){var W=U[N];if(v.hasAggregation(N)&&!(this.isBound(N)&&t)){if(W instanceof k){y[N]=W.clone(a,b);}else if(Array.isArray(W)){y[N]=[];for(var i=0;i<W.length;i++){y[N].push(W[i].clone(a,b));}}else{y[N]=W;}}}var X=o(this.getId());for(var i=0,l=X.length;i<l;i++){var Y=X[i].clone(a);Y.sParentId=x;Y.sParentAggregationName=X[i].sParentAggregationName;}for(N in this.mAssociations){if(!v.hasAssociation(N)){continue;}var Z=this.mAssociations[N];if(Array.isArray(Z)){Z=Z.slice(0);for(var i=0;i<Z.length;i++){if(b.indexOf(Z[i])>=0){Z[i]+="-"+a;}}}else if(b.indexOf(Z)>=0){Z+="-"+a;}y[N]=Z;}}H=new w(x,y);function $(b1,N,H,c1){var d1=b1.mBindingInfos[N];d1=d1||b1.getBindingInfo(N);var e1=q.extend({},d1);if(!d1.templateShareable&&d1.template&&d1.template.clone){e1.template=d1.template.clone(a,b);delete e1.factory;}else if(d1.templateShareable===r){d1.templateShareable=e1.templateShareable=true;L.error("During a clone operation, a template was found that neither was marked with 'templateShareable:true' nor 'templateShareable:false'. "+"The framework won't destroy the template. This could cause errors (e.g. duplicate IDs) or memory leaks "+"(The template is used in aggregation '"+N+"' of object '"+b1.getId()+"')."+"For more information, see documentation under 'Aggregation Binding'.");}delete e1.binding;delete e1.modelChangeHandler;delete e1.dataStateChangeHandler;delete e1.modelRefreshHandler;if(d1.factory||d1.template){H.bindAggregation(c1,e1);}else{H.bindProperty(c1,e1);}}for(N in this.mObjectBindingInfos){H.mObjectBindingInfos[N]=q.extend({},this.mObjectBindingInfos[N]);}for(N in this.mEventRegistry){H.mEventRegistry[N]=this.mEventRegistry[N].slice();}if(t){for(N in this.mBindingInfos){$(this,N,H,N);}}if(k._supportInfo){k._supportInfo.addSupportInfo(H.getId(),k._supportInfo.byId(this.getId()));}if(this._cloneMetadataContexts){this._cloneMetadataContexts(H);}if(this.mForwardedAggregations){for(N in this.mForwardedAggregations){var a1=H.getMetadata().getAggregationForwarder(N);if(a1){Q=a1.getTarget(H,true);if(a1.forwardBinding&&this.isBound(N)){$(this,N,Q,a1.targetAggregationName);}}}}return H;};k._handleLocalizationChange=function(a){var i;if(a===1){q.each(this.oModels,function(n,b){if(b&&b._handleLocalizationChange){b._handleLocalizationChange();}});}else if(a===2){q.each(this.mBindingInfos,function(n,b){var c=b.parts;if(c){for(i=0;i<c.length;i++){if(b.type&&b.type._handleLocalizationChange){b.type._handleLocalizationChange();}}if(b.modelChangeHandler){b.modelChangeHandler();}}});}};k.prototype.findAggregatedObjects=function(R,c){var b=[];if(c&&typeof c!=="function"){c=null;}function l(t){var a,i,n;for(n in t.mAggregations){a=t.mAggregations[n];if(Array.isArray(a)){for(i=0;i<a.length;i++){if(!c||c(a[i])){b.push(a[i]);}if(R){l(a[i]);}}}else if(a instanceof k){if(!c||c(a)){b.push(a);}if(R){l(a);}}}}l(this);return b;};k._defaultContextualSettings={};return k;});

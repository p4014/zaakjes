/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/m/List","sap/m/StandardListItem","sap/ui/base/ManagedObject","sap/base/Log"],function(B,s,S,M,L){"use strict";var a=B.extend("sap.f.cards.ListContent",{renderer:{}});a.prototype._getList=function(){if(this._bIsBeingDestroyed){return null;}var l=this.getAggregation("_content");if(!l){l=new s({id:this.getId()+"-list",growing:false,showNoData:false,showSeparators:"None"});this.setAggregation("_content",l);}return l;};a.prototype.init=function(){B.prototype.init.apply(this,arguments);var l=this._getList();var t=this;l.attachUpdateFinished(function(){if(t._iVisibleItems){var I=l.getItems();for(var i=t._iVisibleItems+1;i<I.length;i++){I[i].setVisible(false);}}});this._oItemTemplate=new S({iconDensityAware:false});};a.prototype.exit=function(){if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null;}};a.prototype.setConfiguration=function(c){B.prototype.setConfiguration.apply(this,arguments);if(!c){return this;}if(c.item){this._setItem(c.item);}return this;};a.prototype._setItem=function(i){i.title&&this._bindItemProperty("title",i.title.value);i.description&&this._bindItemProperty("description",i.description.value);i.icon&&i.icon.src&&this._bindItemProperty("icon",i.icon.src);i.highlight&&this._bindItemProperty("highlight",i.highlight);i.info&&this._bindItemProperty("info",i.info.value);i.info&&this._bindItemProperty("infoState",i.info.state);i.interactionType&&this._bindItemProperty("type",i.interactionType);this._attachActions(i);var p="/";var c=this.getConfiguration();if(c.data&&c.data.path){p=c.data.path;}this._getList().bindItems({path:p,template:this._oItemTemplate});};a.prototype._bindItemProperty=function(p,P){if(!P){return;}var b=M.bindingParser(P);if(b){this._oItemTemplate.bindProperty(p,b);}else{this._oItemTemplate.setProperty(p,P);}};a.prototype._attachActions=function(i){if(!i.actions){return;}var A=i.actions[0];if(A.type==="Navigation"&&A.enabled){this._attachNavigationAction(A);}};a.prototype._attachNavigationAction=function(A){if(A.service){this._oItemTemplate.attachPress(function(e){this.getParent()._oServiceManager.getService("sap.ui.integration.services.Navigation").then(function(n){if(n){n.navigate({parameters:e.getParameters(),manifestParameters:A.parameters});}}).catch(function(){L.error("Navigation service unavailable");});}.bind(this));}else if(A.url){this._oItemTemplate.attachPress(function(){window.open(A.url,A.target||"_blank");});}};return a;});
